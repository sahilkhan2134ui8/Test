<!DOCTYPE html>
<html>
<head>
    <title>Code Editor</title>
</head>
<body>
    <h1>Code Editor</h1>
    <form id="create-form" action="/create" method="post">
        <input type="text" id="file-name" placeholder="File Name">
        <textarea id="file-content" placeholder="File Content"></textarea>
        <button id="create-button">Create File</button>
    </form>
    <form id="run-form" action="/run" method="post">
        <input type="text" id="run-file-name" placeholder="File Name">
        <button id="run-button">Run File</button>
    </form>
    <div id="log-div">
        <h2>Log</h2>
        <pre id="log-content"></pre>
    </div>

    <script>
        const createForm = document.getElementById('create-form');
        const runForm = document.getElementById('run-form');
        const logDiv = document.getElementById('log-div');

        createForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const fileName = document.getElementById('file-name').value;
            const fileContent = document.getElementById('file-content').value;
            fetch('/create', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    file_name: fileName,
                    file_content: fileContent
                })
            })
            .then((response) => response.json())
            .then((data) => {
                console.log(data);
            })
            .catch((error) => {
                console.error(error);
            });
        });

        runForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const fileName = document.getElementById('run-file-name').value;
            fetch('/run', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    file_name: fileName
                })
            })
            .then((response) => response.json())
            .then((data) => {
                logDiv.innerHTML = `<h2>Log</h2><pre>${data.output}</pre>`;
            })
            .catch((error) => {
                console.error(error);
            });
        });
    </script>
</body>
</html>
